/*! Listener - v0.1.0 - 2016-02-01
* https://github.com/seamys/listener
* Copyright (c) 2016 seamys; Licensed MIT */
!function(a,b){var c={url:"/api/listener",param:function(a){return{keys:a}}},d={tid:0,keys:"",taskType:{},appendTaskType:function(a,b){if("function"==typeof b&&"string"==typeof a&&/^[a-z0-9]+$/.test(a)){this.taskType[a]={fun:b,ts:""};var c=[];for(var d in this.taskType)c.push(d);this.keys=c.join(".")}},start:function(){0===this.tid&&!function b(){a.getJSON(c.url,c.param(d.keys),function(a){for(var c in d.taskType){var e=d.taskType[c];a[c]&&a[c]!==e.ts&&(e.ts=a[c],e.fun(e))}d.tid=setTimeout(b,1e3)})}()},stop:function(){clearTimeout(this.tid),this.tid=0}};a.listener={conf:function(b){c=a.extend({},c,b)},task:function(){return 0===arguments.length?d.taskType:arguments.length>=1?d.taskType[arguments[0]]:void d.appendTaskType.call(this,arguments)},start:d.start}}(jQuery);